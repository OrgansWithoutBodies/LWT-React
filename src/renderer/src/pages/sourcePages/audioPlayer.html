<table style="margin-top: 5px" cellspacing="0" cellpadding="0" align="center">
  <tbody>
    <tr>
      <td class="center borderleft" style="padding-left: 10px">
        <span id="do-single" class="click hide"
          ><img
            src="icn/arrow-repeat.png"
            alt="Toggle Repeat (Now ON)"
            title="Toogle Repeat (Now ON)"
            style="width: 24px; height: 24px" /></span
        ><span id="do-repeat" class="click"
          ><img
            src="icn/arrow-norepeat.png"
            alt="Toggle Repeat (Now OFF)"
            title="Toggle Repeat (Now OFF)"
            style="width: 24px; height: 24px"
        /></span>
      </td>
      <td class="center bordermiddle">&nbsp;</td>
      <td class="bordermiddle">
        <div
          id="jquery_jplayer_1"
          class="jp-jplayer"
          style="width: 0px; height: 0px"
        >
          <img
            id="jp_poster_0"
            style="width: 0px; height: 0px; display: none"
          /><audio
            id="jp_audio_0"
            preload="metadata"
            src="https://learning-with-texts.sourceforge.io/media/korean.mp3"
          ></audio>
        </div>
        <div id="jp_container_1" class="jp-audio">
          <div class="jp-type-single">
            <div class="jp-gui jp-interface">
              <ul class="jp-controls">
                <li>
                  <a
                    href="javascript:;"
                    class="jp-play"
                    tabindex="1"
                    style="display: block"
                    >play</a
                  >
                </li>
                <li>
                  <a
                    href="javascript:;"
                    class="jp-pause"
                    tabindex="1"
                    style="display: none"
                    >pause</a
                  >
                </li>
                <li>
                  <a href="javascript:;" class="jp-stop" tabindex="1">stop</a>
                </li>
                <li>
                  <a
                    href="javascript:;"
                    class="jp-mute"
                    tabindex="1"
                    title="mute"
                    >mute</a
                  >
                </li>
                <li>
                  <a
                    href="javascript:;"
                    class="jp-unmute"
                    tabindex="1"
                    title="unmute"
                    style="display: none"
                    >unmute</a
                  >
                </li>
              </ul>
              <div class="jp-progress">
                <div class="jp-seek-bar" style="width: 100%">
                  <div class="jp-play-bar" style="width: 16.9902%"></div>
                </div>
              </div>
              <div class="jp-volume-bar">
                <div class="jp-volume-bar-value" style="width: 80%"></div>
              </div>
              <div class="jp-time-holder">
                <div class="jp-current-time">00:03</div>
                <div class="jp-duration">00:18</div>
              </div>
            </div>
          </div>
        </div>
      </td>
      <td class="center bordermiddle">&nbsp;</td>
      <td class="center bordermiddle">
        <select id="backtime" name="backtime">
          <option value="1">1 sec</option>
          <option value="2">2 sec</option>
          <option value="3">3 sec</option>
          <option value="4">4 sec</option>
          <option value="5" selected="selected">5 sec</option>
          <option value="6">6 sec</option>
          <option value="7">7 sec</option>
          <option value="8">8 sec</option>
          <option value="9">9 sec</option>
          <option value="10">10 sec</option></select
        ><br />
        <span id="backbutt" class="click"
          ><img
            src="icn/arrow-circle-225-left.png"
            alt="Rewind n seconds"
            title="Rewind n seconds" /></span
        >&nbsp;&nbsp;<span id="forwbutt" class="click"
          ><img
            src="icn/arrow-circle-315.png"
            alt="Forward n seconds"
            title="Forward n seconds"
        /></span>
        <span id="playTime" class="hide">3</span>
      </td>
      <td class="center bordermiddle">&nbsp;</td>
      <td class="center borderright" style="padding-right: 10px">
        <select id="playbackrate" name="playbackrate">
          <option value="5">&nbsp; 0.5 x &nbsp;</option>
          <option value="6">&nbsp; 0.6 x &nbsp;</option>
          <option value="7">&nbsp; 0.7 x &nbsp;</option>
          <option value="8">&nbsp; 0.8 x &nbsp;</option>
          <option value="9">&nbsp; 0.9 x &nbsp;</option>
          <option value="10" selected="selected">&nbsp; 1.0 x &nbsp;</option>
          <option value="11">&nbsp; 1.1 x &nbsp;</option>
          <option value="12">&nbsp; 1.2 x &nbsp;</option>
          <option value="13">&nbsp; 1.3 x &nbsp;</option>
          <option value="14">&nbsp; 1.4 x &nbsp;</option>
          <option value="15">&nbsp; 1.5 x &nbsp;</option></select
        ><br />
        <span id="slower" class="click"
          ><img
            src="icn/minus.png"
            alt="Slower"
            title="Slower"
            style="margin-top: 3px" /></span
        >&nbsp;<span id="stdspeed" class="click"
          ><img
            src="icn/status-away.png"
            alt="Normal"
            title="Normal"
            style="margin-top: 3px" /></span
        >&nbsp;<span id="faster" class="click"
          ><img
            src="icn/plus.png"
            alt="Faster"
            title="Faster"
            style="margin-top: 3px"
        /></span>
      </td>
    </tr>
    <script type="text/javascript">
      //<![CDATA[

      function new_pos(p) {
        $('#jquery_jplayer_1').jPlayer('playHead', p);
      }

      function set_new_playerseconds() {
        var newval = $('#backtime :selected').val();
        do_ajax_save_setting('currentplayerseconds', newval);
        // console.log("set_new_playerseconds="+newval);
      }

      function set_new_playbackrate() {
        var newval = $('#playbackrate :selected').val();
        do_ajax_save_setting('currentplaybackrate', newval);
        $('#jquery_jplayer_1').jPlayer('option', 'playbackRate', newval * 0.1);
        // console.log("set_new_playbackrate="+newval);
      }

      function set_current_playbackrate() {
        var val = $('#playbackrate :selected').val();
        $('#jquery_jplayer_1').jPlayer('option', 'playbackRate', val * 0.1);
        // console.log("set_current_playbackrate="+val);
      }

      function click_single() {
        $('#jquery_jplayer_1').unbind($.jPlayer.event.ended + '.jp-repeat');
        $('#do-single').addClass('hide');
        $('#do-repeat').removeClass('hide');
        do_ajax_save_setting('currentplayerrepeatmode', '0');
        return false;
      }

      function click_repeat() {
        $('#jquery_jplayer_1').bind(
          $.jPlayer.event.ended + '.jp-repeat',
          function (event) {
            $(this).jPlayer('play');
          }
        );
        $('#do-repeat').addClass('hide');
        $('#do-single').removeClass('hide');
        do_ajax_save_setting('currentplayerrepeatmode', '1');
        return false;
      }

      function click_back() {
        var t = parseInt($('#playTime').text(), 10);
        var b = parseInt($('#backtime').val(), 10);
        var nt = t - b;
        if (nt < 0) nt = 0;
        $('#jquery_jplayer_1').jPlayer('play', nt);
      }

      function click_forw() {
        var t = parseInt($('#playTime').text(), 10);
        var b = parseInt($('#backtime').val(), 10);
        var nt = t + b;
        $('#jquery_jplayer_1').jPlayer('play', nt);
      }

      function click_stdspeed() {
        $('#playbackrate').val(10);
        set_new_playbackrate();
      }

      function click_slower() {
        var val = $('#playbackrate :selected').val();
        if (val > 5) {
          val--;
          $('#playbackrate').val(val);
          set_new_playbackrate();
        }
      }

      function click_faster() {
        var val = $('#playbackrate :selected').val();
        if (val < 15) {
          val++;
          $('#playbackrate').val(val);
          set_new_playbackrate();
        }
      }

      $(document).ready(function () {
        $('#jquery_jplayer_1').jPlayer({
          ready: function () {
            $(this).jPlayer('setMedia', {
              mp3: 'https://learning-with-texts.sourceforge.io/media/korean.mp3',
            });
          },
          swfPath: 'js',
          noVolume: {
            ipad: /^no$/,
            iphone: /^no$/,
            ipod: /^no$/,
            android_pad: /^no$/,
            android_phone: /^no$/,
            blackberry: /^no$/,
            windows_ce: /^no$/,
            iemobile: /^no$/,
            webos: /^no$/,
            playbook: /^no$/,
          },
        });

        $('#jquery_jplayer_1').bind(
          $.jPlayer.event.timeupdate,
          function (event) {
            $('#playTime').text(Math.floor(event.jPlayer.status.currentTime));
          }
        );

        $('#jquery_jplayer_1').bind($.jPlayer.event.play, function (event) {
          set_current_playbackrate();
          // console.log("play");
        });

        $('#slower').click(click_slower);
        $('#faster').click(click_faster);
        $('#stdspeed').click(click_stdspeed);
        $('#backbutt').click(click_back);
        $('#forwbutt').click(click_forw);
        $('#do-single').click(click_single);
        $('#do-repeat').click(click_repeat);
        $('#playbackrate').change(set_new_playbackrate);
        $('#backtime').change(set_new_playerseconds);
      });
      //]]>
    </script>
  </tbody>
</table>
